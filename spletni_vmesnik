from bottle import route, run, template, TEMPLATE_PATH, post, request, redirect
from datetime import date

import novo
from novo import Stanje

TEMPLATE_PATH.insert(0,'\\Users\\janko\\Desktop\\Projektna\\views')

stanje = novo.primer_stanja 
    
@route('/')
def zacetna_stran():
    return template(
        'zacetna_stran.html',
        stanje=stanje,
    )
    
@route('/oseba/<id_osebe:int>/')
def oseba(id_osebe):
    return template(
        'oseba.html',
        oseba=stanje.ljudje[id_osebe]
    )

@post('/dodaj/<id_osebe:int>/')
def dodaj(id_osebe):
    oseba = stanje.ljudje[id_osebe]
    cena = float(request.forms['cena'])
    kaj = request.forms['kaj']
    strosek = novo.Strosek(date.today(), cena, kaj)
    oseba.dodaj_strosek(strosek)
    redirect("/")

run(host='localhost', port=8080, reloader=True, debug=True)
